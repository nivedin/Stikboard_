_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[21],{AveT:function(e,t,r){"use strict";var c=r("KQm4"),n=r("rePB"),s=r("nKUr"),a=(r("YFqc"),r("q1tI")),i=r("nOHt"),o=r("a6RD"),l=r.n(o),j=r("iuBY"),b=r("abxw"),u=r("SMr6"),O=r("zycw"),d=r("FGyW"),h=(r("jDDT"),r("91UR"),r("//g3"));function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,c)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=l()((function(){return Promise.all([r.e(0),r.e(14),r.e(15)]).then(r.t.bind(null,"rmP6",7))}),{ssr:!1,loadableGenerated:{webpack:function(){return["rmP6"]},modules:["react-quill"]}});t.a=Object(i.withRouter)((function(e){var t=e.router,r=Object(a.useState)([]),i=r[0],o=r[1],l=Object(a.useState)([]),f=l[0],x=l[1],g=Object(a.useState)([]),v=g[0],N=g[1],w=Object(a.useState)([]),y=(w[0],w[1],Object(a.useState)(!!localStorage.getItem("blog")&&JSON.parse(localStorage.getItem("blog")))),P=y[0],S=y[1],_=Object(a.useState)({error:"",sizeError:"",success:"",formData:"",title:"",hidePublishButton:!1}),D=_[0],E=_[1],k=D.error,C=(D.sizeError,D.success),T=D.formData,U=D.title,B=(D.hidePublishButton,Object(j.c)("token")),F=Object(a.useState)(),I=F[0],R=F[1],Y=Object(a.useState)(),Z=Y[0],q=Y[1];Object(a.useEffect)((function(){if(I){var e=URL.createObjectURL(I);return q(e),function(){return URL.revokeObjectURL(e)}}q(void 0)}),[I]);Object(a.useEffect)((function(){E(m(m({},D),{},{formData:new FormData})),H(),L()}),[t]);var H=function(){Object(b.b)().then((function(e){e.error?E(m(m({},D),{},{error:e.error})):o(e)}))},L=function(){Object(u.b)().then((function(e){e.error?E(m(m({},D),{},{error:e.error})):x(e)}))},M=function(e){e.preventDefault(),Object(O.b)(T,B).then((function(e){e.error?E(m(m({},D),{},{error:e.error})):(E(m(m({},D),{},{title:"",error:"",success:"A new blog title '".concat(e.title,"' is created")})),S(""),o(""),x(""),R(""),H(),L())}))},z=function(e){return function(t){var r,c="photo"===e?t.target.files[0]:t.target.value;T.set(e,c),E(m(m({},D),{},(r={},Object(n.a)(r,e,c),Object(n.a)(r,"formData",T),Object(n.a)(r,"error",""),Object(n.a)(r,"success",""),r))),"photo"===e&&function(e){e.target.files&&0!==e.target.files.length?R(e.target.files[0]):R(void 0)}(t)}},J=function(e){S(e),E(m(m({},D),{},{error:"",success:""})),T.set("body",e),localStorage.setItem("blog",JSON.stringify(e))},K=function(e){return function(){E(m(m({},D),{},{error:""}));var t=v.indexOf(e),r=Object(c.a)(v);-1===t?r.push(e):r.splice(t,1),N(r),T.set("categories",r)}},A=function(e){return function(){E(m(m({},D),{},{error:""}));var t=v.indexOf(e),r=Object(c.a)(v);-1===t?r.push(e):r.splice(t,1),N(r),T.set("tags",r)}};return Object(s.jsxs)("div",{className:"container-fluid ",children:[Object(s.jsx)("div",{className:"imagePreview",children:I&&Object(s.jsx)("img",{src:Z})}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsxs)("div",{className:"col-12 col-md-8",children:[Object(s.jsxs)("form",{onSubmit:M,children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{className:"text-muted",children:"Title"}),Object(s.jsx)("input",{type:"text",className:"form-control",value:U,onChange:z("title"),placeholder:"Enter Title"})]}),Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)(p,{modules:h.b,formats:h.a,value:P,placeholder:"Type something",onChange:J})}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Publish"})})]}),Object(s.jsxs)("div",{className:"px-4",children:[Object(s.jsx)(d.a,{position:"top-right",autoClose:2200,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),k&&(k?d.b.error("".concat(k)):""),C&&(C?d.b.info("".concat(C)):"")]})]}),Object(s.jsxs)("div",{className:"col-12 col-md-4",children:[Object(s.jsx)("div",{children:Object(s.jsxs)("div",{className:"form-group pb-2",children:[Object(s.jsx)("h5",{children:"Featured Image"}),Object(s.jsx)("hr",{}),Object(s.jsx)("small",{className:"text-muted",children:"Max size 1MB"}),Object(s.jsx)("br",{}),Object(s.jsxs)("label",{className:"btn btn-outline-info my-2",children:["Upload Featured Image",Object(s.jsx)("input",{type:"file",accept:"image/*",onChange:z("photo"),hidden:!0})]})]})}),Object(s.jsx)("h5",{children:"Categories"}),Object(s.jsx)("hr",{}),Object(s.jsx)("ul",{style:{maxHeight:"200px",overflowY:"scroll"},children:i&&i.map((function(e,t){return Object(s.jsxs)("li",{className:"list-unstyled",children:[Object(s.jsx)("input",{onChange:K(e._id),type:"checkbox",className:"mr-2"}),Object(s.jsx)("label",{className:"form-check-label",children:e.name})]},t)}))}),Object(s.jsx)("hr",{}),Object(s.jsx)("h5",{children:"Tags"}),Object(s.jsx)("hr",{}),Object(s.jsx)("ul",{style:{maxHeight:"200px",overflowY:"scroll"},children:f&&f.map((function(e,t){return Object(s.jsxs)("li",{className:"list-unstyled",children:[Object(s.jsx)("input",{onChange:A(e._id),type:"checkbox",className:"mr-2"}),Object(s.jsx)("label",{className:"form-check-label",children:e.name})]},t)}))})]})]})]})}))},MUZa:function(e,t,r){"use strict";r.r(t);var c=r("nKUr"),n=r("5Yp1"),s=r("vC6e"),a=r("AveT");r("YFqc");t.default=function(){return Object(c.jsx)(n.a,{children:Object(c.jsx)(s.a,{children:Object(c.jsxs)("div",{className:"container-fluid",style:{paddingTop:"140px"},children:[Object(c.jsx)("h1",{className:"pt-5 pb-5",children:"Create a Blog"}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-12",children:Object(c.jsx)(a.a,{})})})]})})})}},eZ7Z:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/crud/blog",function(){return r("MUZa")}])},vC6e:function(e,t,r){"use strict";var c=r("nKUr"),n=r("q1tI"),s=r.n(n),a=r("nOHt"),i=r.n(a),o=r("iuBY");t.a=function(e){var t=e.children;return Object(n.useEffect)((function(){Object(o.e)()?"admin"!==Object(o.e)().role&&i.a.push("/"):i.a.push("/signin")}),[]),Object(c.jsx)(s.a.Fragment,{children:t})}}},[["eZ7Z",1,0,2,3,4,11,10,9,5]]]);