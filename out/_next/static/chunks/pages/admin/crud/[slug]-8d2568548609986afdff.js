_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[20],{AhMt:function(e,t,c){"use strict";var r=c("KQm4"),n=c("rePB"),s=c("nKUr"),a=(c("YFqc"),c("q1tI")),i=c("nOHt"),l=c.n(i),o=c("a6RD"),u=c.n(o),j=c("iuBY"),b=c("abxw"),d=c("SMr6"),O=c("zycw"),h=(c("91UR"),c("//g3")),m=c("obyI");function f(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,r)}return c}function p(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?f(Object(c),!0).forEach((function(t){Object(n.a)(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):f(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}var x=u()((function(){return Promise.all([c.e(0),c.e(14),c.e(15)]).then(c.t.bind(null,"rmP6",7))}),{ssr:!1,loadableGenerated:{webpack:function(){return["rmP6"]},modules:["react-quill"]}});t.a=Object(i.withRouter)((function(e){var t,c=e.router,i=Object(a.useState)(""),o=i[0],u=i[1],f=Object(a.useState)([]),g=f[0],y=f[1],v=Object(a.useState)([]),N=v[0],w=v[1],_=Object(a.useState)([]),P=_[0],k=_[1],D=Object(a.useState)([]),q=D[0],E=D[1],S=Object(a.useState)((t={title:"",error:"",success:"",formData:""},Object(n.a)(t,"title",""),Object(n.a)(t,"body",""),t)),C=S[0],B=S[1],M=C.error,T=C.success,U=C.formData,Y=C.title,F=Object(j.c)("token");Object(a.useEffect)((function(){B(p(p({},C),{},{formData:new FormData})),I(),G(),R()}),[c]);var I=function(){c.query.slug&&Object(O.j)(c.query.slug).then((function(e){e.error?console.log(e.error):(B(p(p({},C),{},{title:e.title})),u(e.body),H(e.categories),K(e.tags))}))},H=function(e){var t=[];e.map((function(e,c){t.push(e._id)})),k(t)},K=function(e){var t=[];e.map((function(e,c){t.push(e._id)})),E(t)},G=function(){Object(b.b)().then((function(e){e.error?B(p(p({},C),{},{error:e.error})):y(e)}))},R=function(){Object(d.b)().then((function(e){e.error?B(p(p({},C),{},{error:e.error})):w(e)}))},z=function(e){return function(){B(p(p({},C),{},{error:""}));var t=P.indexOf(e),c=Object(r.a)(P);-1===t?c.push(e):c.splice(t,1),k(c),U.set("categories",c)}},A=function(e){return function(){B(p(p({},C),{},{error:""}));var t=q.indexOf(e),c=Object(r.a)(q);-1===t?c.push(e):c.splice(t,1),E(c),U.set("tags",c)}},J=function(e){return-1!==P.indexOf(e)},X=function(e){return-1!==q.indexOf(e)},Q=function(e){u(e),U.set("body",e)},W=function(e){e.preventDefault(),Object(O.m)(U,F,c.query.slug).then((function(e){e.error?B(p(p({},C),{},{error:e.error})):(B(p(p({},C),{},{title:"",success:'Blog titled "'.concat(e.title,'" is successfully updated')})),(Object(j.e)()&&"admin"===Object(j.e)().role||Object(j.e)()&&"admin"!==Object(j.e)().role)&&l.a.replace("/blogs/".concat(c.query.slug)))}))},L=function(e){return function(t){var c,r="photo"===e?t.target.files[0]:t.target.value;U.set(e,r),B(p(p({},C),{},(c={},Object(n.a)(c,e,r),Object(n.a)(c,"formData",U),Object(n.a)(c,"error",""),c)))}};return Object(s.jsxs)("div",{className:"container-fluid my-4",children:[o&&Object(s.jsx)("img",{src:"".concat(m.a,"/blog/photo/").concat(c.query.slug),alt:Y,className:"image image-fluid",style:{width:"100%"}}),Object(s.jsxs)("div",{className:"row my-4",children:[Object(s.jsxs)("div",{className:"col-md-8",children:[Object(s.jsxs)("form",{onSubmit:W,children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{className:"text-muted",children:"Title"}),Object(s.jsx)("input",{type:"text",className:"form-control",value:Y,onChange:L("title"),placeholder:"Enter Title"})]}),Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)(x,{modules:h.b,formats:h.a,value:o,placeholder:"Write something ",onChange:Q})}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Update Blog"})})]}),Object(s.jsxs)("div",{className:"py-4",children:[Object(s.jsx)("div",{className:"alert alert-danger",style:{display:M?"":"none"},children:M}),Object(s.jsx)("div",{className:"alert alert-success",style:{display:T?"":"none"},children:T})]})]}),Object(s.jsxs)("div",{className:"col-md-4",children:[Object(s.jsx)("div",{children:Object(s.jsxs)("div",{className:"form-group pb-2",children:[Object(s.jsx)("h5",{children:"Featured Image"}),Object(s.jsx)("hr",{}),Object(s.jsx)("small",{className:"text-muted",children:"Max size 1MB"}),Object(s.jsx)("br",{}),Object(s.jsxs)("label",{className:"btn btn-outline-info my-2",children:["Upload Featured Image",Object(s.jsx)("input",{type:"file",accept:"image/*",onChange:L("photo"),hidden:!0})]})]})}),Object(s.jsx)("h5",{children:"Categories"}),Object(s.jsx)("hr",{}),Object(s.jsx)("ul",{style:{maxHeight:"200px",overflowY:"scroll"},children:g&&g.map((function(e,t){return Object(s.jsxs)("li",{className:"list-unstyled",children:[Object(s.jsx)("input",{onChange:z(e._id),checked:J(e._id),type:"checkbox",className:"mr-2"}),Object(s.jsx)("label",{className:"form-check-label",children:e.name})]},t)}))}),Object(s.jsx)("hr",{}),Object(s.jsx)("h5",{children:"Tags"}),Object(s.jsx)("hr",{}),Object(s.jsx)("ul",{style:{maxHeight:"200px",overflowY:"scroll"},children:N&&N.map((function(e,t){return Object(s.jsxs)("li",{className:"list-unstyled",children:[Object(s.jsx)("input",{onChange:A(e._id),checked:X(e._id),type:"checkbox",className:"mr-2"}),Object(s.jsx)("label",{className:"form-check-label",children:e.name})]},t)}))})]})]})]})}))},iT7G:function(e,t,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/crud/[slug]",function(){return c("we8M")}])},vC6e:function(e,t,c){"use strict";var r=c("nKUr"),n=c("q1tI"),s=c.n(n),a=c("nOHt"),i=c.n(a),l=c("iuBY");t.a=function(e){var t=e.children;return Object(n.useEffect)((function(){Object(l.e)()?"admin"!==Object(l.e)().role&&i.a.push("/"):i.a.push("/signin")}),[]),Object(r.jsx)(s.a.Fragment,{children:t})}},we8M:function(e,t,c){"use strict";c.r(t);var r=c("nKUr"),n=c("5Yp1"),s=c("vC6e"),a=c("AhMt");c("YFqc");t.default=function(){return Object(r.jsx)(n.a,{children:Object(r.jsx)(s.a,{children:Object(r.jsxs)("div",{className:"container-fluid",children:[Object(r.jsx)("h1",{className:"pt-5 pb-5",children:"Update Blog"}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-12",children:Object(r.jsx)(a.a,{})})})]})})})}}},[["iT7G",1,0,2,3,4,10,9]]]);