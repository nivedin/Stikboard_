_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[43],{"0c6W":function(n,e,t){"use strict";t.d(e,"b",(function(){return u})),t.d(e,"f",(function(){return s})),t.d(e,"c",(function(){return a})),t.d(e,"e",(function(){return f})),t.d(e,"a",(function(){return l})),t.d(e,"d",(function(){return d})),t.d(e,"g",(function(){return p}));var r=t("LpSC"),o=t.n(r),c=t("obyI"),i=t("iuBY"),u=function(){return o()("".concat(c.a,"/users"),{method:"GET",headers:{Accept:"application/json"}}).then((function(n){return n.json()})).catch((function(n){return console.log(n)}))},s=function(n){return o()("".concat(c.a,"/user/").concat(n),{method:"GET",headers:{Accept:"application/json"}}).then((function(n){return n.json()})).catch((function(n){return console.log(n)}))},a=function(n){return o()("".concat(c.a,"/user/profile"),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()})).catch((function(n){return console.log(n)}))},f=function(n,e){return o()("".concat(c.a,"/user/update"),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(n)},body:e}).then((function(n){return Object(i.d)(n),n.json()})).catch((function(n){return console.log(n)}))},l=function(n,e,t){return console.log("Req:",n,e,t),o()("".concat(c.a,"/user/follow"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({userId:n,followId:t})}).then((function(n){return Object(i.d)(n),n.json()})).catch((function(n){return console.log(n)}))},d=function(n,e,t){return o()("".concat(c.a,"/user/unfollow"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({userId:n,unfollowId:t})}).then((function(n){return Object(i.d)(n),n.json()})).catch((function(n){return console.log(n)}))},p=function(n){return o()("".concat(c.a,"/users/").concat(n),{method:"GET",headers:{Accept:"application/json"}}).then((function(n){return n.json()})).catch((function(n){return console.log(n)}))}},"8OQS":function(n,e){n.exports=function(n,e){if(null==n)return{};var t,r,o={},c=Object.keys(n);for(r=0;r<c.length;r++)t=c[r],e.indexOf(t)>=0||(o[t]=n[t]);return o}},A3CJ:function(n,e,t){!function(n,e,t,r){"use strict";function o(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function c(n){for(var e,t=1;t<arguments.length;t++)e=null==arguments[t]?{}:arguments[t],t%2?o(Object(e),!0).forEach((function(t){r(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}));return n}function i(n){var e=n.srcList,r=n.imgPromise,o=void 0===r?a({decode:!0}):r,i=n.useSuspense,u=void 0===i||i,s=t.useState(!0)[1],h=f(l(e)),j=h.join("");if(d[j]||(d[j]={promise:p(h,o),cache:"pending",error:null}),d[j].promise.then((function(n){d[j]=c(c({},d[j]),{},{cache:"resolved",src:n}),u||s(!1)})).catch((function(n){d[j]=c(c({},d[j]),{},{cache:"rejected",error:n}),u||s(!1)})),"resolved"===d[j].cache)return{src:d[j].src,isLoading:!1,error:null};if("rejected"===d[j].cache){if(u)throw d[j].error;return{isLoading:!1,error:d[j].error,src:void 0}}if(u)throw d[j].promise;return{isLoading:!0,src:void 0,error:null}}function u(n){var t=n.decode,r=n.src,o=void 0===r?[]:r,c=n.loader,u=void 0===c?null:c,f=n.unloader,l=void 0===f?null:f,d=n.container,p=void 0===d?h:d,j=n.loaderContainer,g=void 0===j?h:j,O=n.unloaderContainer,b=void 0===O?h:O,m=n.imgPromise,y=n.crossorigin,v=n.useSuspense,w=void 0!==v&&v,P=e(n,["decode","src","loader","unloader","container","loaderContainer","unloaderContainer","imgPromise","crossorigin","useSuspense"]),S=i({srcList:o,imgPromise:m=m||a({decode:!(void 0!==t)||t,crossOrigin:y}),useSuspense:w}),N=S.src,x=S.isLoading;return N?p(s.createElement("img",Object.assign({src:N},P))):!w&&x?g(u):!w&&l?b(l):null}e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var s="default"in t?t.default:t;r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;var a=function(n){var e=n.decode,t=n.crossOrigin,r=void 0===t?"":t;return function(n){return new Promise((function(t,o){var c=new Image;r&&(c.crossOrigin=r),c.onload=function(){(void 0===e||e)&&c.decode?c.decode().then(t).catch(o):t()},c.onerror=o,c.src=n}))}},f=function(n){return n.filter((function(n){return n}))},l=function(n){return Array.isArray(n)?n:[n]},d={},p=function(n,e){var t=!1;return new Promise((function(r,o){var c=function(n){return e(n).then((function(){t=!0,r(n)}))};n.reduce((function(n,e){return n.catch((function(){if(!t)return c(e)}))}),c(n.shift())).catch(o)}))},h=function(n){return n};n.Img=u,n.useImage=i,Object.defineProperty(n,"__esModule",{value:!0})}(e,t("8OQS"),t("q1tI"),t("lSNA"))},K64n:function(n,e,t){"use strict";e.Headers=self.Headers,e.Request=self.Request,e.Response=self.Response,e.fetch=self.fetch},LpSC:function(n,e,t){t("K64n"),n.exports=self.fetch.bind(self)},"W9i/":function(n,e,t){"use strict";t.r(e);var r=t("nKUr"),o=t("q1tI"),c=t.n(o),i=t("nOHt"),u=t("0c6W"),s=t("iuBY"),a=t("obyI"),f=t("c/hf"),l=t("A3CJ"),d=t("rePB");function p(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function h(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?p(Object(t),!0).forEach((function(e){Object(d.a)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var j=function(n){var e=n.user,t=Object(o.useState)({userId:e._id,name:e.name,username:e.username,following:e.following,followers:e.followers}),c=t[0],i=t[1],u=c.userId,d=c.name,p=c.username,j=c.followers,g=c.following;Object(o.useEffect)((function(){!function(n){var e=n.followers.find((function(n){return n._id===Object(s.e)()._id}));m(!!e)}(e)}),[]);var O=Object(o.useState)(!1),b=O[0],m=O[1],y=Object(s.c)("token");return Object(r.jsx)("div",{className:"card mb-3",style:{maxWidth:"500px"},children:Object(r.jsxs)("div",{className:"row g-0",children:[Object(r.jsx)("div",{className:"col-md-2",children:Object(r.jsx)(l.Img,{src:["".concat(a.a,"/user/photo/").concat(p),"/images/blank-profile-picture.webp"],unloader:function(){return Object(r.jsx)(l.Img,{src:"/images/blank-profile-picture.webp"})},alt:"user profile",style:{height:"100px",width:"100px"}})}),Object(r.jsx)("div",{className:"col-md-5",children:Object(r.jsxs)("div",{className:"card-body",children:[Object(r.jsx)("h5",{className:"card-title",children:Object(r.jsx)("a",{href:"/profile/".concat(p),children:p})}),Object(r.jsx)("p",{className:"card-text text-muted",children:d})]})}),Object(r.jsx)("div",{className:"col-md-5",children:Object(r.jsxs)("div",{className:"card-body",children:[Object(r.jsx)(f.a,{following:b,onButtonClick:function(n){n(Object(s.e)()._id,y,u).then((function(n){n.error?console.log(n.error):(i(h(h({},c),{},{following:n.following,followers:n.followers})),m(!b))}))}}),Object(r.jsxs)("p",{className:"mr-2",children:["following : ",g?g.length:"0"]}),Object(r.jsxs)("p",{children:["followers : ",j?j.length:"0"]})]})})]})})},g=function(n){var e=n.users,t=Object(o.useState)(""),i=t[0],u=t[1],a=Object(o.useState)([]),f=a[0],l=a[1];Object(o.useEffect)((function(){var n;n=Object(s.e)()._id,u(n),l(e)}),[]);return Object(r.jsx)(c.a.Fragment,{children:Object(r.jsx)("div",{className:"container",children:f.filter((function(n){return n._id!==i})).map((function(n,e){return Object(r.jsx)(c.a.Fragment,{children:Object(r.jsx)(j,{user:n},e)})}))})})};g.getInitialProps=function(){return Object(u.b)().then((function(n){if(!n.error)return{users:n.users};console.log(n.error)}))};e.default=Object(i.withRouter)(g)},"c/hf":function(n,e,t){"use strict";var r=t("nKUr"),o=t("q1tI"),c=t.n(o),i=t("0c6W");e.a=function(n){var e=n.following,t=n.onButtonClick;return Object(r.jsx)(c.a.Fragment,{children:Object(r.jsx)("div",{className:"d-inline-block",children:e?Object(r.jsx)("button",{onClick:function(){t(i.d)},className:"btn btn-sm btn-outline-warning ",children:"Unfollow"}):Object(r.jsx)("button",{onClick:function(){t(i.a)},className:"btn btn-sm btn-success ",children:"Follow"})})})}},"hh/q":function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users",function(){return t("W9i/")}])},iuBY:function(n,e,t){"use strict";t.d(e,"d",(function(){return f})),t.d(e,"g",(function(){return l})),t.d(e,"k",(function(){return d})),t.d(e,"i",(function(){return p})),t.d(e,"j",(function(){return h})),t.d(e,"c",(function(){return g})),t.d(e,"a",(function(){return b})),t.d(e,"e",(function(){return m})),t.d(e,"l",(function(){return y})),t.d(e,"b",(function(){return v})),t.d(e,"h",(function(){return w})),t.d(e,"f",(function(){return P}));var r=t("LpSC"),o=t.n(r),c=t("p46w"),i=t.n(c),u=t("nOHt"),s=t.n(u),a=t("obyI"),f=function(n){401===n.status&&h((function(){s.a.push({pathname:"/signin",query:{message:"Your session is expired.Please signin"}})}))},l=function(n){return o()("".concat(a.a,"/pre-signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(n){return n.json()})).catch((function(n){return console.log(n)}))},d=function(n){return o()("".concat(a.a,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(n){return n.json()})).catch((function(n){return console.log(n)}))},p=function(n){return o()("".concat(a.a,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(n){return n.json()})).catch((function(n){return console.log(n)}))},h=function(n){return j("token"),O("user"),n(),o()("".concat(a.a,"/signout"),{method:"GET"}).then((function(n){console.log("signout success")})).catch((function(n){return console.log(n)}))},j=function(n){i.a.remove(n,{expires:1})},g=function(n){return i.a.get(n)},O=function(n){localStorage.removeItem(n)},b=function(n,e){var t,r;t="token",r=n.token,i.a.set(t,r,{expires:1}),function(n,e){localStorage.setItem(n,JSON.stringify(e))}("user",n.user),e()},m=function(){if(g("token"))return!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))},y=function(n,e){if(localStorage.getItem("user")){var t=JSON.parse(localStorage.getItem("user"));t=n,localStorage.setItem("user",JSON.stringify(t)),e()}},v=function(n){return o()("".concat(a.a,"/forgot-password"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(n){return n.json()})).catch((function(n){return console.log(n)}))},w=function(n){return o()("".concat(a.a,"/reset-password"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(n){return n.json()})).catch((function(n){return console.log(n)}))},P=function(n){return o()("".concat(a.a,"/google-login"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(n){return n.json()})).catch((function(n){return console.log(n)}))}},lSNA:function(n,e){n.exports=function(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}},obyI:function(n,e,t){"use strict";t.d(e,"a",(function(){return c})),t.d(e,"b",(function(){return i})),t.d(e,"d",(function(){return u})),t.d(e,"e",(function(){return s})),t.d(e,"c",(function(){return a})),t.d(e,"f",(function(){return f}));var r=t("yLiY"),o=t.n(r)()().publicRuntimeConfig,c=o.PRODUCTION?o.API_PRODUCTION:o.API_DEVELOPMENT,i=o.APP_NAME,u=o.PRODUCTION?o.DOMAIN_PRODUCTION:o.DOMAIN_DEVELOPMENT,s=o.FB_APP_ID,a=o.DISQUS_SHORTNAME,f=o.GOOGLE_CLIENT_ID},p46w:function(n,e,t){var r,o;!function(c){if(void 0===(o="function"===typeof(r=c)?r.call(e,t,e,n):r)||(n.exports=o),!0,n.exports=c(),!!0){var i=window.Cookies,u=window.Cookies=c();u.noConflict=function(){return window.Cookies=i,u}}}((function(){function n(){for(var n=0,e={};n<arguments.length;n++){var t=arguments[n];for(var r in t)e[r]=t[r]}return e}function e(n){return n.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function t(r){function o(){}function c(e,t,c){if("undefined"!==typeof document){"number"===typeof(c=n({path:"/"},o.defaults,c)).expires&&(c.expires=new Date(1*new Date+864e5*c.expires)),c.expires=c.expires?c.expires.toUTCString():"";try{var i=JSON.stringify(t);/^[\{\[]/.test(i)&&(t=i)}catch(a){}t=r.write?r.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var u="";for(var s in c)c[s]&&(u+="; "+s,!0!==c[s]&&(u+="="+c[s].split(";")[0]));return document.cookie=e+"="+t+u}}function i(n,t){if("undefined"!==typeof document){for(var o={},c=document.cookie?document.cookie.split("; "):[],i=0;i<c.length;i++){var u=c[i].split("="),s=u.slice(1).join("=");t||'"'!==s.charAt(0)||(s=s.slice(1,-1));try{var a=e(u[0]);if(s=(r.read||r)(s,a)||e(s),t)try{s=JSON.parse(s)}catch(f){}if(o[a]=s,n===a)break}catch(f){}}return n?o[n]:o}}return o.set=c,o.get=function(n){return i(n,!1)},o.getJSON=function(n){return i(n,!0)},o.remove=function(e,t){c(e,"",n(t,{expires:-1}))},o.defaults={},o.withConverter=t,o}((function(){}))}))},rePB:function(n,e,t){"use strict";function r(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}t.d(e,"a",(function(){return r}))}},[["hh/q",1,0,2]]]);