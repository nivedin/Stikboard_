_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[44],{"0c6W":function(e,n,t){"use strict";t.d(n,"b",(function(){return s})),t.d(n,"f",(function(){return u})),t.d(n,"c",(function(){return a})),t.d(n,"e",(function(){return l})),t.d(n,"a",(function(){return f})),t.d(n,"d",(function(){return d})),t.d(n,"g",(function(){return j}));var r=t("LpSC"),o=t.n(r),c=t("obyI"),i=t("iuBY"),s=function(){return o()("".concat(c.a,"/users"),{method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},u=function(e){return o()("".concat(c.a,"/user/").concat(e),{method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},a=function(e){return o()("".concat(c.a,"/user/profile"),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},l=function(e,n){return o()("".concat(c.a,"/user/update"),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(e)},body:n}).then((function(e){return Object(i.d)(e),e.json()})).catch((function(e){return console.log(e)}))},f=function(e,n,t){return console.log("Req:",e,n,t),o()("".concat(c.a,"/user/follow"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({userId:e,followId:t})}).then((function(e){return Object(i.d)(e),e.json()})).catch((function(e){return console.log(e)}))},d=function(e,n,t){return o()("".concat(c.a,"/user/unfollow"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({userId:e,unfollowId:t})}).then((function(e){return Object(i.d)(e),e.json()})).catch((function(e){return console.log(e)}))},j=function(e){return o()("".concat(c.a,"/users/").concat(e),{method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}},"8OQS":function(e,n){e.exports=function(e,n){if(null==e)return{};var t,r,o={},c=Object.keys(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}},A3CJ:function(e,n,t){!function(e,n,t,r){"use strict";function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n,t=1;t<arguments.length;t++)n=null==arguments[t]?{}:arguments[t],t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}));return e}function i(e){var n=e.srcList,r=e.imgPromise,o=void 0===r?a({decode:!0}):r,i=e.useSuspense,s=void 0===i||i,u=t.useState(!0)[1],b=l(f(n)),p=b.join("");if(d[p]||(d[p]={promise:j(b,o),cache:"pending",error:null}),d[p].promise.then((function(e){d[p]=c(c({},d[p]),{},{cache:"resolved",src:e}),s||u(!1)})).catch((function(e){d[p]=c(c({},d[p]),{},{cache:"rejected",error:e}),s||u(!1)})),"resolved"===d[p].cache)return{src:d[p].src,isLoading:!1,error:null};if("rejected"===d[p].cache){if(s)throw d[p].error;return{isLoading:!1,error:d[p].error,src:void 0}}if(s)throw d[p].promise;return{isLoading:!0,src:void 0,error:null}}function s(e){var t=e.decode,r=e.src,o=void 0===r?[]:r,c=e.loader,s=void 0===c?null:c,l=e.unloader,f=void 0===l?null:l,d=e.container,j=void 0===d?b:d,p=e.loaderContainer,h=void 0===p?b:p,O=e.unloaderContainer,g=void 0===O?b:O,m=e.imgPromise,w=e.crossorigin,v=e.useSuspense,y=void 0!==v&&v,P=n(e,["decode","src","loader","unloader","container","loaderContainer","unloaderContainer","imgPromise","crossorigin","useSuspense"]),x=i({srcList:o,imgPromise:m=m||a({decode:!(void 0!==t)||t,crossOrigin:w}),useSuspense:y}),N=x.src,S=x.isLoading;return N?j(u.createElement("img",Object.assign({src:N},P))):!y&&S?h(s):!y&&f?g(f):null}n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;var u="default"in t?t.default:t;r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;var a=function(e){var n=e.decode,t=e.crossOrigin,r=void 0===t?"":t;return function(e){return new Promise((function(t,o){var c=new Image;r&&(c.crossOrigin=r),c.onload=function(){(void 0===n||n)&&c.decode?c.decode().then(t).catch(o):t()},c.onerror=o,c.src=e}))}},l=function(e){return e.filter((function(e){return e}))},f=function(e){return Array.isArray(e)?e:[e]},d={},j=function(e,n){var t=!1;return new Promise((function(r,o){var c=function(e){return n(e).then((function(){t=!0,r(e)}))};e.reduce((function(e,n){return e.catch((function(){if(!t)return c(n)}))}),c(e.shift())).catch(o)}))},b=function(e){return e};e.Img=s,e.useImage=i,Object.defineProperty(e,"__esModule",{value:!0})}(n,t("8OQS"),t("q1tI"),t("lSNA"))},"W9i/":function(e,n,t){"use strict";t.r(n);var r=t("nKUr"),o=t("q1tI"),c=t.n(o),i=t("nOHt"),s=t("0c6W"),u=t("iuBY"),a=t("obyI"),l=t("c/hf"),f=t("A3CJ"),d=t("rePB");function j(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?j(Object(t),!0).forEach((function(n){Object(d.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p=function(e){var n=e.user,t=Object(o.useState)({userId:n._id,name:n.name,username:n.username,following:n.following,followers:n.followers}),c=t[0],i=t[1],s=c.userId,d=c.name,j=c.username,p=c.followers,h=c.following;Object(o.useEffect)((function(){!function(e){var n=e.followers.find((function(e){return e._id===Object(u.e)()._id}));m(!!n)}(n)}),[]);var O=Object(o.useState)(!1),g=O[0],m=O[1],w=Object(u.c)("token");return Object(r.jsx)("div",{className:"card mb-3",style:{maxWidth:"500px"},children:Object(r.jsxs)("div",{className:"row g-0",children:[Object(r.jsx)("div",{className:"col-md-2",children:Object(r.jsx)(f.Img,{src:["".concat(a.a,"/user/photo/").concat(j),"/images/blank-profile-picture.webp"],unloader:function(){return Object(r.jsx)(f.Img,{src:"/images/blank-profile-picture.webp"})},alt:"user profile",style:{height:"100px",width:"100px"}})}),Object(r.jsx)("div",{className:"col-md-5",children:Object(r.jsxs)("div",{className:"card-body",children:[Object(r.jsx)("h5",{className:"card-title",children:Object(r.jsx)("a",{href:"/profile/".concat(j),children:j})}),Object(r.jsx)("p",{className:"card-text text-muted",children:d})]})}),Object(r.jsx)("div",{className:"col-md-5",children:Object(r.jsxs)("div",{className:"card-body",children:[Object(r.jsx)(l.a,{following:g,onButtonClick:function(e){e(Object(u.e)()._id,w,s).then((function(e){e.error?console.log(e.error):(i(b(b({},c),{},{following:e.following,followers:e.followers})),m(!g))}))}}),Object(r.jsxs)("p",{className:"mr-2",children:["following : ",h?h.length:"0"]}),Object(r.jsxs)("p",{children:["followers : ",p?p.length:"0"]})]})})]})})},h=function(e){var n=e.users,t=Object(o.useState)(""),i=t[0],s=t[1],a=Object(o.useState)([]),l=a[0],f=a[1];Object(o.useEffect)((function(){var e;e=Object(u.e)()._id,s(e),f(n)}),[]);return Object(r.jsx)(c.a.Fragment,{children:Object(r.jsx)("div",{className:"container",children:l.filter((function(e){return e._id!==i})).map((function(e,n){return Object(r.jsx)(c.a.Fragment,{children:Object(r.jsx)(p,{user:e},n)})}))})})};h.getInitialProps=function(){return Object(s.b)().then((function(e){if(!e.error)return{users:e.users};console.log(e.error)}))};n.default=Object(i.withRouter)(h)},"c/hf":function(e,n,t){"use strict";var r=t("nKUr"),o=t("q1tI"),c=t.n(o),i=t("0c6W");n.a=function(e){var n=e.following,t=e.onButtonClick;return Object(r.jsx)(c.a.Fragment,{children:Object(r.jsx)("div",{className:"d-inline-block",children:n?Object(r.jsx)("button",{onClick:function(){t(i.d)},className:"btn btn-sm btn-outline-warning ",children:"Unfollow"}):Object(r.jsx)("button",{onClick:function(){t(i.a)},className:"btn btn-sm btn-success ",children:"Follow"})})})}},"hh/q":function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users",function(){return t("W9i/")}])},lSNA:function(e,n){e.exports=function(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}}},[["hh/q",2,0,1,3]]]);