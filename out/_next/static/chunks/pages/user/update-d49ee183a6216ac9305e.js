_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[42],{"0c6W":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return j})),n.d(t,"g",(function(){return b}));var r=n("LpSC"),c=n.n(r),o=n("obyI"),a=n("iuBY"),s=function(){return c()("".concat(o.a,"/users"),{method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},i=function(e){return c()("".concat(o.a,"/user/").concat(e),{method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},u=function(e){return c()("".concat(o.a,"/user/profile"),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},l=function(e,t){return c()("".concat(o.a,"/user/update"),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(e)},body:t}).then((function(e){return Object(a.d)(e),e.json()})).catch((function(e){return console.log(e)}))},d=function(e,t,n){return console.log("Req:",e,t,n),c()("".concat(o.a,"/user/follow"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,followId:n})}).then((function(e){return Object(a.d)(e),e.json()})).catch((function(e){return console.log(e)}))},j=function(e,t,n){return c()("".concat(o.a,"/user/unfollow"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,unfollowId:n})}).then((function(e){return Object(a.d)(e),e.json()})).catch((function(e){return console.log(e)}))},b=function(e){return c()("".concat(o.a,"/users/").concat(e),{method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}},GGaf:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/update",function(){return n("j0R5")}])},j0R5:function(e,t,n){"use strict";n.r(t);var r=n("nKUr"),c=n("5Yp1"),o=n("yxxe"),a=n("rePB"),s=(n("YFqc"),n("q1tI")),i=n.n(s),u=(n("nOHt"),n("iuBY")),l=n("0c6W"),d=n("obyI"),j=n("A3CJ");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(){var e=Object(s.useState)({username:"",username_for_photo:"",name:"",email:"",about:"",password:"",error:!1,success:!1,loading:!1,photo:"",userData:new FormData}),t=e[0],n=e[1],c=Object(u.c)("token"),o=t.username,b=t.username_for_photo,p=t.name,m=t.email,h=t.about,O=t.password,g=t.error,x=t.success,y=t.loading,v=(t.photo,t.userData);Object(s.useEffect)((function(){Object(l.c)(c).then((function(e){e.error?n(f(f({},t),{},{error:e.error})):n(f(f({},t),{},{username:e.username,username_for_photo:e.username,name:e.name,email:e.email,about:e.about}))})),n(f(f({},t),{},{userData:new FormData}))}),[]);var w=function(){return Object(r.jsx)(j.Img,{src:"/images/blank-profile-picture.webp"})},N=function(e){return function(r){var c,o="photo"===e?r.target.files[0]:r.target.value;v.set(e,o),n(f(f({},t),{},(c={},Object(a.a)(c,e,o),Object(a.a)(c,"userData",v),Object(a.a)(c,"error",!1),Object(a.a)(c,"success",!1),c)))}},_=function(e){e.preventDefault(),n(f(f({},t),{},{loading:!0})),Object(l.e)(c,v).then((function(e){e.error?(console.log("data.error",e.error),n(f(f({},t),{},{error:e.error,loading:!1}))):Object(u.l)(e,(function(){n(f(f({},t),{},{username:e.username,name:e.name,email:e.email,about:e.about,password:"",success:!0,loading:!1}))}))}))},P=function(e){var r,o=e.target.files[0];v.set("photo",o),n(f(f({},t),{},(r={},Object(a.a)(r,"photo",o),Object(a.a)(r,"userData",v),Object(a.a)(r,"error",!1),Object(a.a)(r,"success",!1),r))),Object(l.e)(c,v).then((function(e){e.error?(console.log("data.error",e.error),n(f(f({},t),{},{error:e.error,loading:!1}))):(Object(u.l)(e,(function(){n(f(f({},t),{},{success:!0,loading:!1}))})),window.location.reload())}))},A=function(){return Object(r.jsx)("div",{className:"alert alert-danger",style:{display:g?"":"none"},children:g})},E=function(){return Object(r.jsx)("div",{className:"alert alert-success",style:{display:x?"":"none"},children:"Profile updated"})},D=function(){return Object(r.jsx)("div",{className:"alert alert-info",style:{display:y?"":"none"},children:"Loading..."})};return Object(r.jsx)(i.a.Fragment,{children:Object(r.jsx)("div",{className:"container",children:Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col-md-4",children:Object(r.jsx)(j.Img,{src:["".concat(d.a,"/user/photo/").concat(b),"/images/blank-profile-picture.webp"],unloader:w,className:"img img-fluid img-thumbnail mb-3",style:{maxHeight:"auto",maxWidth:"100%"},alt:"user profile"})}),Object(r.jsx)("div",{className:"col-md-8 mb-5",children:Object(r.jsxs)("form",{onSubmit:_,children:[Object(r.jsx)("div",{className:"form-group",children:Object(r.jsxs)("label",{className:"btn btn-outline-info",children:["Profile photo",Object(r.jsx)("input",{onChange:P,type:"file",accept:"image/*",hidden:!0})]})}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{className:"text-muted",children:"Username"}),Object(r.jsx)("input",{onChange:N("username"),type:"text",value:o,className:"form-control"})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{className:"text-muted",children:"Name"}),Object(r.jsx)("input",{onChange:N("name"),type:"text",value:p,className:"form-control"})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{className:"text-muted",children:"About"}),Object(r.jsx)("textarea",{onChange:N("about"),type:"text",value:h,className:"form-control"})]}),Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{className:"text-muted",children:"Password"}),Object(r.jsx)("input",{onChange:N("password"),type:"password",value:O,className:"form-control"})]}),Object(r.jsxs)("div",{children:[E(),A(),D()]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:!o||!p||!m,children:"Update"})})]})})]})})})};t.default=function(){return Object(r.jsx)(c.a,{children:Object(r.jsx)(o.a,{children:Object(r.jsx)("div",{className:"container-fluid",style:{paddingTop:"140px"},children:Object(r.jsx)("div",{className:"row",children:Object(r.jsx)(p,{})})})})})}},yxxe:function(e,t,n){"use strict";var r=n("nKUr"),c=n("q1tI"),o=n.n(c),a=n("nOHt"),s=n.n(a),i=n("iuBY");t.a=function(e){var t=e.children;return Object(c.useEffect)((function(){Object(i.e)()||s.a.push("/signin")}),[]),Object(r.jsx)(o.a.Fragment,{children:t})}}},[["GGaf",1,0,2,3,4]]]);