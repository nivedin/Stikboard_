_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[39],{"0iGR":function(e,t,c){"use strict";c.r(t);var r=c("nKUr"),n=c("5Yp1"),s=c("yxxe"),a=c("AhMt");c("YFqc");t.default=function(){return Object(r.jsx)(n.a,{children:Object(r.jsx)(s.a,{children:Object(r.jsxs)("div",{className:"container-fluid",style:{paddingTop:"50px"},children:[Object(r.jsx)("h1",{className:"pt-5 pb-5",children:"Update Blog"}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-12",children:Object(r.jsx)(a.a,{})})})]})})})}},AhMt:function(e,t,c){"use strict";var r=c("KQm4"),n=c("rePB"),s=c("nKUr"),a=(c("YFqc"),c("q1tI")),i=c("nOHt"),l=c.n(i),o=c("a6RD"),u=c.n(o),j=c("iuBY"),b=c("abxw"),d=c("SMr6"),O=c("zycw"),h=(c("91UR"),c("//g3")),m=c("obyI");function f(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,r)}return c}function p(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?f(Object(c),!0).forEach((function(t){Object(n.a)(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):f(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}var x=u()((function(){return Promise.all([c.e(0),c.e(15),c.e(16)]).then(c.t.bind(null,"rmP6",7))}),{ssr:!1,loadableGenerated:{webpack:function(){return["rmP6"]},modules:["react-quill"]}});t.a=Object(i.withRouter)((function(e){var t,c=e.router,i=Object(a.useState)(""),o=i[0],u=i[1],f=Object(a.useState)([]),g=f[0],y=f[1],v=Object(a.useState)([]),N=v[0],w=v[1],_=Object(a.useState)([]),P=_[0],S=_[1],k=Object(a.useState)([]),D=k[0],q=k[1],E=Object(a.useState)((t={title:"",error:"",success:"",formData:""},Object(n.a)(t,"title",""),Object(n.a)(t,"body",""),t)),B=E[0],R=E[1],U=B.error,Y=B.success,C=B.formData,F=B.title,T=Object(j.c)("token");Object(a.useEffect)((function(){R(p(p({},B),{},{formData:new FormData})),I(),K(),G()}),[c]);var I=function(){c.query.slug&&Object(O.j)(c.query.slug).then((function(e){e.error?console.log(e.error):(R(p(p({},B),{},{title:e.title})),u(e.body),M(e.categories),H(e.tags))}))},M=function(e){var t=[];e.map((function(e,c){t.push(e._id)})),S(t)},H=function(e){var t=[];e.map((function(e,c){t.push(e._id)})),q(t)},K=function(){Object(b.b)().then((function(e){e.error?R(p(p({},B),{},{error:e.error})):y(e)}))},G=function(){Object(d.b)().then((function(e){e.error?R(p(p({},B),{},{error:e.error})):w(e)}))},z=function(e){return function(){R(p(p({},B),{},{error:""}));var t=P.indexOf(e),c=Object(r.a)(P);-1===t?c.push(e):c.splice(t,1),S(c),C.set("categories",c)}},A=function(e){return function(){R(p(p({},B),{},{error:""}));var t=D.indexOf(e),c=Object(r.a)(D);-1===t?c.push(e):c.splice(t,1),q(c),C.set("tags",c)}},J=function(e){return-1!==P.indexOf(e)},L=function(e){return-1!==D.indexOf(e)},X=function(e){u(e),C.set("body",e)},Q=function(e){e.preventDefault(),Object(O.m)(C,T,c.query.slug).then((function(e){e.error?R(p(p({},B),{},{error:e.error})):(R(p(p({},B),{},{title:"",success:'Blog titled "'.concat(e.title,'" is successfully updated')})),(Object(j.e)()&&"admin"===Object(j.e)().role||Object(j.e)()&&"admin"!==Object(j.e)().role)&&l.a.replace("/blogs/".concat(c.query.slug)))}))},W=function(e){return function(t){var c,r="photo"===e?t.target.files[0]:t.target.value;C.set(e,r),R(p(p({},B),{},(c={},Object(n.a)(c,e,r),Object(n.a)(c,"formData",C),Object(n.a)(c,"error",""),c)))}};return Object(s.jsxs)("div",{className:"container-fluid my-4",children:[o&&Object(s.jsx)("img",{src:"".concat(m.a,"/blog/photo/").concat(c.query.slug),alt:F,className:"image image-fluid",style:{width:"100%"}}),Object(s.jsxs)("div",{className:"row my-4",children:[Object(s.jsxs)("div",{className:"col-md-8",children:[Object(s.jsxs)("form",{onSubmit:Q,children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{className:"text-muted",children:"Title"}),Object(s.jsx)("input",{type:"text",className:"form-control",value:F,onChange:W("title"),placeholder:"Enter Title"})]}),Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)(x,{modules:h.b,formats:h.a,value:o,placeholder:"Write something ",onChange:X})}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Update Blog"})})]}),Object(s.jsxs)("div",{className:"py-4",children:[Object(s.jsx)("div",{className:"alert alert-danger",style:{display:U?"":"none"},children:U}),Object(s.jsx)("div",{className:"alert alert-success",style:{display:Y?"":"none"},children:Y})]})]}),Object(s.jsxs)("div",{className:"col-md-4",children:[Object(s.jsx)("div",{children:Object(s.jsxs)("div",{className:"form-group pb-2",children:[Object(s.jsx)("h5",{children:"Featured Image"}),Object(s.jsx)("hr",{}),Object(s.jsx)("small",{className:"text-muted",children:"Max size 1MB"}),Object(s.jsx)("br",{}),Object(s.jsxs)("label",{className:"btn btn-outline-info my-2",children:["Upload Featured Image",Object(s.jsx)("input",{type:"file",accept:"image/*",onChange:W("photo"),hidden:!0})]})]})}),Object(s.jsx)("h5",{children:"Categories"}),Object(s.jsx)("hr",{}),Object(s.jsx)("ul",{style:{maxHeight:"200px",overflowY:"scroll"},children:g&&g.map((function(e,t){return Object(s.jsxs)("li",{className:"list-unstyled",children:[Object(s.jsx)("input",{onChange:z(e._id),checked:J(e._id),type:"checkbox",className:"mr-2"}),Object(s.jsx)("label",{className:"form-check-label",children:e.name})]},t)}))}),Object(s.jsx)("hr",{}),Object(s.jsx)("h5",{children:"Tags"}),Object(s.jsx)("hr",{}),Object(s.jsx)("ul",{style:{maxHeight:"200px",overflowY:"scroll"},children:N&&N.map((function(e,t){return Object(s.jsxs)("li",{className:"list-unstyled",children:[Object(s.jsx)("input",{onChange:A(e._id),checked:L(e._id),type:"checkbox",className:"mr-2"}),Object(s.jsx)("label",{className:"form-check-label",children:e.name})]},t)}))})]})]})]})}))},SmLR:function(e,t,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/crud/[slug]",function(){return c("0iGR")}])},yxxe:function(e,t,c){"use strict";var r=c("nKUr"),n=c("q1tI"),s=c.n(n),a=c("nOHt"),i=c.n(a),l=c("iuBY");t.a=function(e){var t=e.children;return Object(n.useEffect)((function(){Object(l.e)()||i.a.push("/signin")}),[]),Object(r.jsx)(s.a.Fragment,{children:t})}}},[["SmLR",2,0,1,3,4,5,11,10]]]);