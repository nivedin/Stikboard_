_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[40],{AveT:function(e,t,r){"use strict";var c=r("KQm4"),s=r("rePB"),n=r("nKUr"),a=(r("YFqc"),r("q1tI")),o=r("nOHt"),i=r("a6RD"),l=r.n(i),j=r("iuBY"),b=r("abxw"),u=r("SMr6"),O=r("zycw"),d=r("FGyW"),h=(r("jDDT"),r("91UR"),r("//g3"));function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,c)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=l()((function(){return Promise.all([r.e(0),r.e(15),r.e(16)]).then(r.t.bind(null,"rmP6",7))}),{ssr:!1,loadableGenerated:{webpack:function(){return["rmP6"]},modules:["react-quill"]}});t.a=Object(o.withRouter)((function(e){var t=e.router,r=Object(a.useState)([]),o=r[0],i=r[1],l=Object(a.useState)([]),f=l[0],x=l[1],g=Object(a.useState)([]),v=g[0],N=g[1],y=Object(a.useState)([]),w=(y[0],y[1],Object(a.useState)(!!localStorage.getItem("blog")&&JSON.parse(localStorage.getItem("blog")))),P=w[0],S=w[1],D=Object(a.useState)({error:"",sizeError:"",success:"",formData:"",title:"",hidePublishButton:!1}),_=D[0],E=D[1],k=_.error,T=(_.sizeError,_.success),C=_.formData,U=_.title,B=(_.hidePublishButton,Object(j.c)("token")),F=Object(a.useState)(),I=F[0],L=F[1],R=Object(a.useState)(),Y=R[0],q=R[1];Object(a.useEffect)((function(){if(I){var e=URL.createObjectURL(I);return q(e),function(){return URL.revokeObjectURL(e)}}q(void 0)}),[I]);Object(a.useEffect)((function(){E(m(m({},_),{},{formData:new FormData})),H(),z()}),[t]);var H=function(){Object(b.b)().then((function(e){e.error?E(m(m({},_),{},{error:e.error})):i(e)}))},z=function(){Object(u.b)().then((function(e){e.error?E(m(m({},_),{},{error:e.error})):x(e)}))},J=function(e){e.preventDefault(),Object(O.b)(C,B).then((function(e){e.error?E(m(m({},_),{},{error:e.error})):(E(m(m({},_),{},{title:"",error:"",success:"A new blog title '".concat(e.title,"' is created")})),S(""),i(""),x(""),L(""),H(),z())}))},K=function(e){return function(t){var r,c="photo"===e?t.target.files[0]:t.target.value;C.set(e,c),E(m(m({},_),{},(r={},Object(s.a)(r,e,c),Object(s.a)(r,"formData",C),Object(s.a)(r,"error",""),Object(s.a)(r,"success",""),r))),"photo"===e&&function(e){e.target.files&&0!==e.target.files.length?L(e.target.files[0]):L(void 0)}(t)}},A=function(e){S(e),E(m(m({},_),{},{error:"",success:""})),C.set("body",e),localStorage.setItem("blog",JSON.stringify(e))},M=function(e){return function(){E(m(m({},_),{},{error:""}));var t=v.indexOf(e),r=Object(c.a)(v);-1===t?r.push(e):r.splice(t,1),N(r),C.set("categories",r)}},G=function(e){return function(){E(m(m({},_),{},{error:""}));var t=v.indexOf(e),r=Object(c.a)(v);-1===t?r.push(e):r.splice(t,1),N(r),C.set("tags",r)}};return Object(n.jsxs)("div",{className:"container-fluid ",children:[Object(n.jsx)("div",{className:"imagePreview",children:I&&Object(n.jsx)("img",{src:Y})}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("div",{className:"col-12 col-md-8",children:[Object(n.jsxs)("form",{onSubmit:J,children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{className:"text-muted",children:"Title"}),Object(n.jsx)("input",{type:"text",className:"form-control",value:U,onChange:K("title"),placeholder:"Enter Title"})]}),Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)(p,{modules:h.b,formats:h.a,value:P,placeholder:"Type something",onChange:A})}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Publish"})})]}),Object(n.jsxs)("div",{className:"px-4",children:[Object(n.jsx)(d.a,{position:"top-right",autoClose:2200,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),k&&(k?d.b.error("".concat(k)):""),T&&(T?d.b.info("".concat(T)):"")]})]}),Object(n.jsxs)("div",{className:"col-12 col-md-4",children:[Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"form-group pb-2",children:[Object(n.jsx)("h5",{children:"Featured Image"}),Object(n.jsx)("hr",{}),Object(n.jsx)("small",{className:"text-muted",children:"Max size 1MB"}),Object(n.jsx)("br",{}),Object(n.jsxs)("label",{className:"btn btn-outline-info my-2",children:["Upload Featured Image",Object(n.jsx)("input",{type:"file",accept:"image/*",onChange:K("photo"),hidden:!0})]})]})}),Object(n.jsx)("h5",{children:"Categories"}),Object(n.jsx)("hr",{}),Object(n.jsx)("ul",{style:{maxHeight:"200px",overflowY:"scroll"},children:o&&o.map((function(e,t){return Object(n.jsxs)("li",{className:"list-unstyled",children:[Object(n.jsx)("input",{onChange:M(e._id),type:"checkbox",className:"mr-2"}),Object(n.jsx)("label",{className:"form-check-label",children:e.name})]},t)}))}),Object(n.jsx)("hr",{}),Object(n.jsx)("h5",{children:"Tags"}),Object(n.jsx)("hr",{}),Object(n.jsx)("ul",{style:{maxHeight:"200px",overflowY:"scroll"},children:f&&f.map((function(e,t){return Object(n.jsxs)("li",{className:"list-unstyled",children:[Object(n.jsx)("input",{onChange:G(e._id),type:"checkbox",className:"mr-2"}),Object(n.jsx)("label",{className:"form-check-label",children:e.name})]},t)}))})]})]})]})}))},SD2O:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/crud/blog",function(){return r("bexL")}])},bexL:function(e,t,r){"use strict";r.r(t);var c=r("nKUr"),s=r("5Yp1"),n=r("yxxe"),a=r("AveT");r("YFqc");t.default=function(){return Object(c.jsx)(s.a,{children:Object(c.jsx)(n.a,{children:Object(c.jsxs)("div",{className:"container-fluid",style:{paddingTop:"140px"},children:[Object(c.jsx)("h1",{className:"pt-5 pb-5",children:"Create a Blog"}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-12",children:Object(c.jsx)(a.a,{})})})]})})})}},yxxe:function(e,t,r){"use strict";var c=r("nKUr"),s=r("q1tI"),n=r.n(s),a=r("nOHt"),o=r.n(a),i=r("iuBY");t.a=function(e){var t=e.children;return Object(s.useEffect)((function(){Object(i.e)()||o.a.push("/signin")}),[]),Object(c.jsx)(n.a.Fragment,{children:t})}}},[["SD2O",2,0,1,3,4,5,12,11,10,6]]]);